$("#status").hide(),$("#otp").hide(),$("#password").hide(),$("#cpassword").hide(),$("#verify").hide(),$("#sendbtn").click(()=>{email=$("#email").val(),$("#sendbtn").prop("disabled",!0),setTimeout(()=>{$("#sendbtn").prop("disabled",!1)},5e3),$.post("/password/reset/send",{email:email,_token:$("meta[name=\"csrf-token\"]").attr("content")},function(a,b){a=JSON.parse(a),$("#status").show(),"success"===b&&(a.success?otpSendSuccess(email):otpSendFailed(a))})});const otpSendSuccess=a=>{$("#sendbtn").text("Resend"),$("#mail").prop("value",a),$("#sendbtn").prop("disabled",!0),setTimeout(()=>{$("#sendbtn").prop("disabled",!1)},5e3),$("#otp").show(),$("#password").show(),$("#cpassword").show(),$("#verify").show(),setSuccess("otp send success")},ValidateEmail=a=>!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a),otpSendFailed=a=>{$("#sendbtn").prop("disabled",!1),setError(a.data)},setError=a=>{$("#status").show(),$("#status").addClass("alert-danger"),$("#status").removeClass("alert-success"),$("#status").text(a)},setSuccess=a=>{$("#status").show(),$("#status").addClass("alert-success"),$("#status").removeClass("alert-danger"),$("#status").text(a)},verifyotp=a=>{a.preventDefault();const b=$("#otp").val(),c=$("#mail").val(),d=$("#password").val(),e=$("#cpassword").val();return ValidateEmail(c)?void(5<d.length&&d===e&&4===b.length&&!isNaN(b)?setPassword(b,d,c):4!=b.length||isNaN(b)?setError("otp must be 4 digit number"):setError("password now matched")):void setError("invalid email address")},setPassword=(a,b,c)=>{const d={otp:a,password:b,email:c,_token:$("meta[name=\"csrf-token\"]").attr("content")};$.post("/password/reset/verify",d,function(a,b){a=JSON.parse(a),"success"===b?otpverify(a,c):setError("something went wrong")})},otpverify=(a,b)=>{a.success?(window.location.replace("/login?verify=success&email="+b),setSuccess(a.data)):setError(a.data)};$("#verify").click(verifyotp);