$(document).ready(function(){$("form").on("submit",function(a){a.preventDefault();let b=$("form  textarea").val().trim();if(3>b.length)setError("invalid comment");else{$("form  :submit").hide(),$("#commentLoading").show();const a=$("form :input").toArray(),b={};a.forEach(a=>{b[a.name]=a.value}),sendComment(b)}})});const setError=(a,b="alert-danger")=>{const c=$("#commentMsg");$("#zeroComments").hide(),c.show(),c.removeClass(`alert-*`),c.addClass(`alert ${b} h4`),c.text(a)},sendComment=a=>{console.log(a),$.post("/article/comment",a,function(a,b){try{a=JSON.parse(a)}catch(a){}"success"===b?($("form  textarea").val(" "),a.status?(setError(a.message,"alert-success"),location.reload()):a.pending?setError(a.message,"alert-warning"):setError(a.message)):setError("something went wrong"),$("#commentLoading").hide(),$("form  :submit").show()})};